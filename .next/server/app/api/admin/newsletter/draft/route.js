"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/admin/newsletter/draft/route";
exports.ids = ["app/api/admin/newsletter/draft/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute&page=%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute.ts&appDir=%2FUsers%2Fjohan%2F.gemini%2Fantigravity%2Fscratch%2Favedian-newsroom-nextjs%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjohan%2F.gemini%2Fantigravity%2Fscratch%2Favedian-newsroom-nextjs&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute&page=%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute.ts&appDir=%2FUsers%2Fjohan%2F.gemini%2Fantigravity%2Fscratch%2Favedian-newsroom-nextjs%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjohan%2F.gemini%2Fantigravity%2Fscratch%2Favedian-newsroom-nextjs&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_johan_gemini_antigravity_scratch_avedian_newsroom_nextjs_app_api_admin_newsletter_draft_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/admin/newsletter/draft/route.ts */ \"(rsc)/./app/api/admin/newsletter/draft/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/admin/newsletter/draft/route\",\n        pathname: \"/api/admin/newsletter/draft\",\n        filename: \"route\",\n        bundlePath: \"app/api/admin/newsletter/draft/route\"\n    },\n    resolvedPagePath: \"/Users/johan/.gemini/antigravity/scratch/avedian-newsroom-nextjs/app/api/admin/newsletter/draft/route.ts\",\n    nextConfigOutput,\n    userland: _Users_johan_gemini_antigravity_scratch_avedian_newsroom_nextjs_app_api_admin_newsletter_draft_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/admin/newsletter/draft/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhZG1pbiUyRm5ld3NsZXR0ZXIlMkZkcmFmdCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWRtaW4lMkZuZXdzbGV0dGVyJTJGZHJhZnQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZG1pbiUyRm5ld3NsZXR0ZXIlMkZkcmFmdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmpvaGFuJTJGLmdlbWluaSUyRmFudGlncmF2aXR5JTJGc2NyYXRjaCUyRmF2ZWRpYW4tbmV3c3Jvb20tbmV4dGpzJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmpvaGFuJTJGLmdlbWluaSUyRmFudGlncmF2aXR5JTJGc2NyYXRjaCUyRmF2ZWRpYW4tbmV3c3Jvb20tbmV4dGpzJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN3RDtBQUNySTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2F2ZWRpYW4tbmV3c3Jvb20vP2M5MDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL2pvaGFuLy5nZW1pbmkvYW50aWdyYXZpdHkvc2NyYXRjaC9hdmVkaWFuLW5ld3Nyb29tLW5leHRqcy9hcHAvYXBpL2FkbWluL25ld3NsZXR0ZXIvZHJhZnQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FkbWluL25ld3NsZXR0ZXIvZHJhZnQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZG1pbi9uZXdzbGV0dGVyL2RyYWZ0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hZG1pbi9uZXdzbGV0dGVyL2RyYWZ0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2pvaGFuLy5nZW1pbmkvYW50aWdyYXZpdHkvc2NyYXRjaC9hdmVkaWFuLW5ld3Nyb29tLW5leHRqcy9hcHAvYXBpL2FkbWluL25ld3NsZXR0ZXIvZHJhZnQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FkbWluL25ld3NsZXR0ZXIvZHJhZnQvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute&page=%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute.ts&appDir=%2FUsers%2Fjohan%2F.gemini%2Fantigravity%2Fscratch%2Favedian-newsroom-nextjs%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjohan%2F.gemini%2Fantigravity%2Fscratch%2Favedian-newsroom-nextjs&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/admin/newsletter/draft/route.ts":
/*!*************************************************!*\
  !*** ./app/api/admin/newsletter/draft/route.ts ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_kit_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/kit/client */ \"(rsc)/./src/lib/kit/client.ts\");\n/* harmony import */ var _lib_sanity_client__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/sanity/client */ \"(rsc)/./src/lib/sanity/client.ts\");\n/* harmony import */ var _portabletext_to_html__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @portabletext/to-html */ \"(rsc)/./node_modules/@portabletext/to-html/dist/index.js\");\n\n\n\n\n// Security: Verify the webhook secret to prevent unauthorized access\nconst SANITY_WEBHOOK_SECRET = process.env.SANITY_WEBHOOK_SECRET;\nconst corsHeaders = {\n    \"Access-Control-Allow-Origin\": \"*\",\n    \"Access-Control-Allow-Methods\": \"POST, OPTIONS\",\n    \"Access-Control-Allow-Headers\": \"Content-Type, x-sanity-secret\"\n};\n// Components for portabletext-to-html\n// This ensures Sanity rich text is converted to email-safe HTML strings\nconst portableTextComponents = {\n    block: {\n        h1: ({ children })=>`<h1 style=\"font-size: 24px; font-weight: bold; margin: 24px 0 12px; color: #111;\">${children}</h1>`,\n        h2: ({ children })=>`<h2 style=\"font-size: 20px; font-weight: bold; margin: 24px 0 12px; color: #333;\">${children}</h2>`,\n        h3: ({ children })=>`<h3 style=\"font-size: 18px; font-weight: bold; margin: 20px 0 10px; color: #444;\">${children}</h3>`,\n        normal: ({ children })=>`<p style=\"font-size: 16px; line-height: 1.6; color: #555; margin-bottom: 16px;\">${children}</p>`,\n        blockquote: ({ children })=>`<blockquote style=\"border-left: 4px solid #ccc; margin: 16px 0; padding-left: 16px; font-style: italic; color: #666;\">${children}</blockquote>`\n    },\n    list: {\n        bullet: ({ children })=>`<ul style=\"margin-left: 20px; margin-bottom: 16px; color: #555; font-size: 16px; line-height: 1.6;\">${children}</ul>`,\n        number: ({ children })=>`<ol style=\"margin-left: 20px; margin-bottom: 16px; color: #555; font-size: 16px; line-height: 1.6;\">${children}</ol>`\n    },\n    listItem: {\n        bullet: ({ children })=>`<li style=\"margin-bottom: 8px;\">${children}</li>`,\n        number: ({ children })=>`<li style=\"margin-bottom: 8px;\">${children}</li>`\n    },\n    marks: {\n        link: ({ children, value })=>`<a href=\"${value.href}\" style=\"color: #000; text-decoration: underline;\" target=\"_blank\" rel=\"noopener noreferrer\">${children}</a>`,\n        strong: ({ children })=>`<strong>${children}</strong>`,\n        em: ({ children })=>`<em>${children}</em>`\n    },\n    types: {\n        image: ({ value })=>{\n            const imageUrl = value?.asset ? (0,_lib_sanity_client__WEBPACK_IMPORTED_MODULE_2__.urlForImage)(value).width(600).url() : \"\";\n            return imageUrl ? `<img src=\"${imageUrl}\" alt=\"${value.alt || \"\"}\" style=\"max-width: 100%; height: auto; border-radius: 4px; margin: 20px 0;\" />` : \"\";\n        }\n    }\n};\nasync function POST(request) {\n    try {\n        // 1. Authenticate Request\n        const secret = request.headers.get(\"x-sanity-secret\");\n        const sanityCheck = request.headers.get(\"sanity-webhook-signature\"); // Present on real webhooks\n        if (secret !== SANITY_WEBHOOK_SECRET) {\n            if (!SANITY_WEBHOOK_SECRET) console.warn(\"SANITY_WEBHOOK_SECRET is not set\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401,\n                headers: corsHeaders\n            });\n        }\n        // 2. Extract Document ID\n        // Support two payloads:\n        // A) Manual \"Draft Newsletter\" button: { docId: \"...\" }\n        // B) Sanity Webhook: { _id: \"...\", _type: \"post\", ... }\n        const body = await request.json();\n        const docId = body.docId || body._id;\n        if (!docId) {\n            console.warn(\"Missing docId in payload:\", body);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Missing Document ID\"\n            }, {\n                status: 400,\n                headers: corsHeaders\n            });\n        }\n        // 3. Fetch Full Article Content from Sanity\n        // We always refetch to ensure we have the absolute latest version and all fields\n        const query = `*[_type == \"post\" && _id == $id][0]{\n      title,\n      slug,\n      excerpt,\n      mainImage, // Alias assumed handled in query or we map it here\n      coverImage, // Fallback\n      body,\n      publishedAt,\n      \"authorName\": author->name\n    }`;\n        const article = await _lib_sanity_client__WEBPACK_IMPORTED_MODULE_2__.client.fetch(query, {\n            id: docId\n        });\n        if (!article) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Article not found\"\n            }, {\n                status: 404,\n                headers: corsHeaders\n            });\n        }\n        // 4. Generate Email Content\n        const articleUrl = `https://sergioavedian.com/blog/${article.slug.current}`;\n        // Resolve Main Image (Handle alias mismatch safety)\n        const rawImage = article.mainImage || article.coverImage;\n        const heroImageUrl = rawImage ? (0,_lib_sanity_client__WEBPACK_IMPORTED_MODULE_2__.urlForImage)(rawImage).width(800).url() : \"\";\n        // Convert Portable Text Body to HTML\n        const bodyHtml = article.body ? (0,_portabletext_to_html__WEBPACK_IMPORTED_MODULE_3__.toHTML)(article.body, {\n            components: portableTextComponents\n        }) : \"\";\n        // Assemble Full Email HTML\n        const emailTemplate = `\n      <div style=\"font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; color: #333; max-width: 640px; margin: 0 auto; padding: 20px;\">\n        \n        <!-- Hero Image -->\n        ${heroImageUrl ? `\n          <div style=\"margin-bottom: 24px;\">\n            <img src=\"${heroImageUrl}\" alt=\"${article.title}\" style=\"width: 100%; height: auto; border-radius: 8px; display: block;\" />\n          </div>\n        ` : \"\"}\n        \n        <!-- Title -->\n        <h1 style=\"font-size: 28px; font-weight: 700; line-height: 1.25; margin-bottom: 16px; color: #111;\">\n          ${article.title}\n        </h1>\n\n        <!-- Content Body (Converted from Portable Text) -->\n        <div style=\"font-size: 16px; line-height: 1.6; color: #444; margin-bottom: 32px;\">\n          ${bodyHtml || `<p>${article.excerpt}</p>`} \n        </div>\n\n        <!-- Read More Button (If needed, primarily for excerpt-only emails, but good CTA anyway) -->\n        <div style=\"text-align: center; margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee;\">\n          <a href=\"${articleUrl}\" style=\"background-color: #000; color: #fff; text-decoration: none; padding: 14px 28px; border-radius: 6px; font-weight: 600; font-size: 16px; display: inline-block;\">\n            Read This Article on the Website\n          </a>\n        </div>\n        \n        <div style=\"text-align: center; margin-top: 24px; font-size: 14px; color: #888;\">\n          <p>Published on ${new Date(article.publishedAt || Date.now()).toLocaleDateString()}</p>\n        </div>\n\n      </div>\n    `;\n        // 5. Create Draft Broadcast in Kit\n        const broadcast = await (0,_lib_kit_client__WEBPACK_IMPORTED_MODULE_1__.createBroadcast)({\n            subject: `New Post: ${article.title}`,\n            content: emailTemplate,\n            public: false,\n            description: `Drafted via Sanity Connect on ${new Date().toLocaleString()}`\n        });\n        console.log(`Draft created for ${article.title} (Kit ID: ${broadcast.data?.id})`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            broadcastId: broadcast.data?.id,\n            message: \"Draft created successfully with full content\"\n        }, {\n            headers: corsHeaders\n        });\n    } catch (error) {\n        console.error(\"Draft generation error:\", error);\n        // Ensure we return JSON with CORS specific headers even on crash\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal Server Error\",\n            details: error.message\n        }, {\n            status: 500,\n            headers: corsHeaders\n        });\n    }\n}\nasync function OPTIONS() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({}, {\n        headers: corsHeaders\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FkbWluL25ld3NsZXR0ZXIvZHJhZnQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXdEO0FBQ0w7QUFDTztBQUNYO0FBRS9DLHFFQUFxRTtBQUNyRSxNQUFNSyx3QkFBd0JDLFFBQVFDLEdBQUcsQ0FBQ0YscUJBQXFCO0FBRS9ELE1BQU1HLGNBQWM7SUFDbEIsK0JBQStCO0lBQy9CLGdDQUFnQztJQUNoQyxnQ0FBZ0M7QUFDbEM7QUFFQSxzQ0FBc0M7QUFDdEMsd0VBQXdFO0FBQ3hFLE1BQU1DLHlCQUF5QjtJQUM3QkMsT0FBTztRQUNMQyxJQUFJLENBQUMsRUFBRUMsUUFBUSxFQUFPLEdBQUssQ0FBQyxrRkFBa0YsRUFBRUEsU0FBUyxLQUFLLENBQUM7UUFDL0hDLElBQUksQ0FBQyxFQUFFRCxRQUFRLEVBQU8sR0FBSyxDQUFDLGtGQUFrRixFQUFFQSxTQUFTLEtBQUssQ0FBQztRQUMvSEUsSUFBSSxDQUFDLEVBQUVGLFFBQVEsRUFBTyxHQUFLLENBQUMsa0ZBQWtGLEVBQUVBLFNBQVMsS0FBSyxDQUFDO1FBQy9IRyxRQUFRLENBQUMsRUFBRUgsUUFBUSxFQUFPLEdBQUssQ0FBQyxnRkFBZ0YsRUFBRUEsU0FBUyxJQUFJLENBQUM7UUFDaElJLFlBQVksQ0FBQyxFQUFFSixRQUFRLEVBQU8sR0FBSyxDQUFDLHNIQUFzSCxFQUFFQSxTQUFTLGFBQWEsQ0FBQztJQUNyTDtJQUNBSyxNQUFNO1FBQ0pDLFFBQVEsQ0FBQyxFQUFFTixRQUFRLEVBQU8sR0FBSyxDQUFDLG9HQUFvRyxFQUFFQSxTQUFTLEtBQUssQ0FBQztRQUNySk8sUUFBUSxDQUFDLEVBQUVQLFFBQVEsRUFBTyxHQUFLLENBQUMsb0dBQW9HLEVBQUVBLFNBQVMsS0FBSyxDQUFDO0lBQ3ZKO0lBQ0FRLFVBQVU7UUFDUkYsUUFBUSxDQUFDLEVBQUVOLFFBQVEsRUFBTyxHQUFLLENBQUMsZ0NBQWdDLEVBQUVBLFNBQVMsS0FBSyxDQUFDO1FBQ2pGTyxRQUFRLENB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QyxDQUFDLEdBQUc7UUFDM0JMLFNBQVM3QjtJQUNYO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hdmVkaWFuLW5ld3Nyb29tLy4vYXBwL2FwaS9hZG1pbi9uZXdzbGV0dGVyL2RyYWZ0L3JvdXRlLnRzPzU2MjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgY3JlYXRlQnJvYWRjYXN0IH0gZnJvbSBcIkAvbGliL2tpdC9jbGllbnRcIjtcbmltcG9ydCB7IGNsaWVudCwgdXJsRm9ySW1hZ2UgfSBmcm9tIFwiQC9saWIvc2FuaXR5L2NsaWVudFwiO1xuaW1wb3J0IHsgdG9IVE1MIH0gZnJvbSBcIkBwb3J0YWJsZXRleHQvdG8taHRtbFwiO1xuXG4vLyBTZWN1cml0eTogVmVyaWZ5IHRoZSB3ZWJob29rIHNlY3JldCB0byBwcmV2ZW50IHVuYXV0aG9yaXplZCBhY2Nlc3NcbmNvbnN0IFNBTklUWV9XRUJIT09LX1NFQ1JFVCA9IHByb2Nlc3MuZW52LlNBTklUWV9XRUJIT09LX1NFQ1JFVDtcblxuY29uc3QgY29yc0hlYWRlcnMgPSB7XG4gICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nOiAnKicsXG4gICdBY2Nlc3MtQ29udHJvbC1BbGxvdy1NZXRob2RzJzogJ1BPU1QsIE9QVElPTlMnLFxuICAnQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycyc6ICdDb250ZW50LVR5cGUsIHgtc2FuaXR5LXNlY3JldCdcbn07XG5cbi8vIENvbXBvbmVudHMgZm9yIHBvcnRhYmxldGV4dC10by1odG1sXG4vLyBUaGlzIGVuc3VyZXMgU2FuaXR5IHJpY2ggdGV4dCBpcyBjb252ZXJ0ZWQgdG8gZW1haWwtc2FmZSBIVE1MIHN0cmluZ3NcbmNvbnN0IHBvcnRhYmxlVGV4dENvbXBvbmVudHMgPSB7XG4gIGJsb2NrOiB7XG4gICAgaDE6ICh7IGNoaWxkcmVuIH06IGFueSkgPT4gYDxoMSBzdHlsZT1cImZvbnQtc2l6ZTogMjRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbjogMjRweCAwIDEycHg7IGNvbG9yOiAjMTExO1wiPiR7Y2hpbGRyZW59PC9oMT5gLFxuICAgIGgyOiAoeyBjaGlsZHJlbiB9OiBhbnkpID0+IGA8aDIgc3R5bGU9XCJmb250LXNpemU6IDIwcHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW46IDI0cHggMCAxMnB4OyBjb2xvcjogIzMzMztcIj4ke2NoaWxkcmVufTwvaDI+YCxcbiAgICBoMzogKHsgY2hpbGRyZW4gfTogYW55KSA9PiBgPGgzIHN0eWxlPVwiZm9udC1zaXplOiAxOHB4OyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luOiAyMHB4IDAgMTBweDsgY29sb3I6ICM0NDQ7XCI+JHtjaGlsZHJlbn08L2gzPmAsXG4gICAgbm9ybWFsOiAoeyBjaGlsZHJlbiB9OiBhbnkpID0+IGA8cCBzdHlsZT1cImZvbnQtc2l6ZTogMTZweDsgbGluZS1oZWlnaHQ6IDEuNjsgY29sb3I6ICM1NTU7IG1hcmdpbi1ib3R0b206IDE2cHg7XCI+JHtjaGlsZHJlbn08L3A+YCxcbiAgICBibG9ja3F1b3RlOiAoeyBjaGlsZHJlbiB9OiBhbnkpID0+IGA8YmxvY2txdW90ZSBzdHlsZT1cImJvcmRlci1sZWZ0OiA0cHggc29saWQgI2NjYzsgbWFyZ2luOiAxNnB4IDA7IHBhZGRpbmctbGVmdDogMTZweDsgZm9udC1zdHlsZTogaXRhbGljOyBjb2xvcjogIzY2NjtcIj4ke2NoaWxkcmVufTwvYmxvY2txdW90ZT5gLFxuICB9LFxuICBsaXN0OiB7XG4gICAgYnVsbGV0OiAoeyBjaGlsZHJlbiB9OiBhbnkpID0+IGA8dWwgc3R5bGU9XCJtYXJnaW4tbGVmdDogMjBweDsgbWFyZ2luLWJvdHRvbTogMTZweDsgY29sb3I6ICM1NTU7IGZvbnQtc2l6ZTogMTZweDsgbGluZS1oZWlnaHQ6IDEuNjtcIj4ke2NoaWxkcmVufTwvdWw+YCxcbiAgICBudW1iZXI6ICh7IGNoaWxkcmVuIH06IGFueSkgPT4gYDxvbCBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAyMHB4OyBtYXJnaW4tYm90dG9tOiAxNnB4OyBjb2xvcjogIzU1NTsgZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS42O1wiPiR7Y2hpbGRyZW59PC9vbD5gLFxuICB9LFxuICBsaXN0SXRlbToge1xuICAgIGJ1bGxldDogKHsgY2hpbGRyZW4gfTogYW55KSA9PiBgPGxpIHN0eWxlPVwibWFyZ2luLWJvdHRvbTogOHB4O1wiPiR7Y2hpbGRyZW59PC9saT5gLFxuICAgIG51bWJlcjogKHsgY2hpbGRyZW4gfTogYW55KSA9PiBgPGxpIHN0eWxlPVwibWFyZ2luLWJvdHRvbTogOHB4O1wiPiR7Y2hpbGRyZW59PC9saT5gLFxuICB9LFxuICBtYXJrczoge1xuICAgIGxpbms6ICh7IGNoaWxkcmVuLCB2YWx1ZSB9OiBhbnkpID0+IGA8YSBocmVmPVwiJHt2YWx1ZS5ocmVmfVwiIHN0eWxlPVwiY29sb3I6ICMwMDA7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lO1wiIHRhcmdldD1cIl9ibGFua1wiIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIj4ke2NoaWxkcmVufTwvYT5gLFxuICAgIHN0cm9uZzogKHsgY2hpbGRyZW4gfTogYW55KSA9PiBgPHN0cm9uZz4ke2NoaWxkcmVufTwvc3Ryb25nPmAsXG4gICAgZW06ICh7IGNoaWxkcmVuIH06IGFueSkgPT4gYDxlbT4ke2NoaWxkcmVufTwvZW0+YCxcbiAgfSxcbiAgdHlwZXM6IHtcbiAgICBpbWFnZTogKHsgdmFsdWUgfTogYW55KSA9PiB7XG4gICAgICBjb25zdCBpbWFnZVVybCA9IHZhbHVlPy5hc3NldCA/IHVybEZvckltYWdlKHZhbHVlKS53aWR0aCg2MDApLnVybCgpIDogJyc7XG4gICAgICByZXR1cm4gaW1hZ2VVcmwgPyBgPGltZyBzcmM9XCIke2ltYWdlVXJsfVwiIGFsdD1cIiR7dmFsdWUuYWx0IHx8ICcnfVwiIHN0eWxlPVwibWF4LXdpZHRoOiAxMDAlOyBoZWlnaHQ6IGF1dG87IGJvcmRlci1yYWRpdXM6IDRweDsgbWFyZ2luOiAyMHB4IDA7XCIgLz5gIDogJyc7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIDEuIEF1dGhlbnRpY2F0ZSBSZXF1ZXN0XG4gICAgY29uc3Qgc2VjcmV0ID0gcmVxdWVzdC5oZWFkZXJzLmdldChcIngtc2FuaXR5LXNlY3JldFwiKTtcbiAgICBjb25zdCBzYW5pdHlDaGVjayA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJzYW5pdHktd2ViaG9vay1zaWduYXR1cmVcIik7IC8vIFByZXNlbnQgb24gcmVhbCB3ZWJob29rc1xuXG4gICAgaWYgKHNlY3JldCAhPT0gU0FOSVRZX1dFQkhPT0tfU0VDUkVUKSB7XG4gICAgICBpZiAoIVNBTklUWV9XRUJIT09LX1NFQ1JFVCkgY29uc29sZS53YXJuKFwiU0FOSVRZX1dFQkhPT0tfU0VDUkVUIGlzIG5vdCBzZXRcIik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LCB7IHN0YXR1czogNDAxLCBoZWFkZXJzOiBjb3JzSGVhZGVycyB9KTtcbiAgICB9XG5cbiAgICAvLyAyLiBFeHRyYWN0IERvY3VtZW50IElEXG4gICAgLy8gU3VwcG9ydCB0d28gcGF5bG9hZHM6XG4gICAgLy8gQSkgTWFudWFsIFwiRHJhZnQgTmV3c2xldHRlclwiIGJ1dHRvbjogeyBkb2NJZDogXCIuLi5cIiB9XG4gICAgLy8gQikgU2FuaXR5IFdlYmhvb2s6IHsgX2lkOiBcIi4uLlwiLCBfdHlwZTogXCJwb3N0XCIsIC4uLiB9XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuICAgIGNvbnN0IGRvY0lkID0gYm9keS5kb2NJZCB8fCBib2R5Ll9pZDtcblxuICAgIGlmICghZG9jSWQpIHtcbiAgICAgIGNvbnNvbGUud2FybihcIk1pc3NpbmcgZG9jSWQgaW4gcGF5bG9hZDpcIiwgYm9keSk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJNaXNzaW5nIERvY3VtZW50IElEXCIgfSwgeyBzdGF0dXM6IDQwMCwgaGVhZGVyczogY29yc0hlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgLy8gMy4gRmV0Y2ggRnVsbCBBcnRpY2xlIENvbnRlbnQgZnJvbSBTYW5pdHlcbiAgICAvLyBXZSBhbHdheXMgcmVmZXRjaCB0byBlbnN1cmUgd2UgaGF2ZSB0aGUgYWJzb2x1dGUgbGF0ZXN0IHZlcnNpb24gYW5kIGFsbCBmaWVsZHNcbiAgICBjb25zdCBxdWVyeSA9IGAqW190eXBlID09IFwicG9zdFwiICYmIF9pZCA9PSAkaWRdWzBde1xuICAgICAgdGl0bGUsXG4gICAgICBzbHVnLFxuICAgICAgZXhjZXJwdCxcbiAgICAgIG1haW5JbWFnZSwgLy8gQWxpYXMgYXNzdW1lZCBoYW5kbGVkIGluIHF1ZXJ5IG9yIHdlIG1hcCBpdCBoZXJlXG4gICAgICBjb3ZlckltYWdlLCAvLyBGYWxsYmFja1xuICAgICAgYm9keSxcbiAgICAgIHB1Ymxpc2hlZEF0LFxuICAgICAgXCJhdXRob3JOYW1lXCI6IGF1dGhvci0+bmFtZVxuICAgIH1gO1xuICAgIGNvbnN0IGFydGljbGUgPSBhd2FpdCBjbGllbnQuZmV0Y2gocXVlcnksIHsgaWQ6IGRvY0lkIH0pO1xuXG4gICAgaWYgKCFhcnRpY2xlKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJBcnRpY2xlIG5vdCBmb3VuZFwiIH0sIHsgc3RhdHVzOiA0MDQsIGhlYWRlcnM6IGNvcnNIZWFkZXJzIH0pO1xuICAgIH1cblxuICAgIC8vIDQuIEdlbmVyYXRlIEVtYWlsIENvbnRlbnRcbiAgICBjb25zdCBhcnRpY2xlVXJsID0gYGh0dHBzOi8vc2VyZ2lvYXZlZGlhbi5jb20vYmxvZy8ke2FydGljbGUuc2x1Zy5jdXJyZW50fWA7XG4gICAgXG4gICAgLy8gUmVzb2x2ZSBNYWluIEltYWdlIChIYW5kbGUgYWxpYXMgbWlzbWF0Y2ggc2FmZXR5KVxuICAgIGNvbnN0IHJhd0ltYWdlID0gYXJ0aWNsZS5tYWluSW1hZ2UgfHwgYXJ0aWNsZS5jb3ZlckltYWdlO1xuICAgIGNvbnN0IGhlcm9JbWFnZVVybCA9IHJhd0ltYWdlID8gdXJsRm9ySW1hZ2UocmF3SW1hZ2UpLndpZHRoKDgwMCkudXJsKCkgOiBcIlwiO1xuXG4gICAgLy8gQ29udmVydCBQb3J0YWJsZSBUZXh0IEJvZHkgdG8gSFRNTFxuICAgIGNvbnN0IGJvZHlIdG1sID0gYXJ0aWNsZS5ib2R5ID8gdG9IVE1MKGFydGljbGUuYm9keSwgeyBjb21wb25lbnRzOiBwb3J0YWJsZVRleHRDb21wb25lbnRzIH0pIDogXCJcIjtcblxuICAgIC8vIEFzc2VtYmxlIEZ1bGwgRW1haWwgSFRNTFxuICAgIGNvbnN0IGVtYWlsVGVtcGxhdGUgPSBgXG4gICAgICA8ZGl2IHN0eWxlPVwiZm9udC1mYW1pbHk6ICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWY7IGNvbG9yOiAjMzMzOyBtYXgtd2lkdGg6IDY0MHB4OyBtYXJnaW46IDAgYXV0bzsgcGFkZGluZzogMjBweDtcIj5cbiAgICAgICAgXG4gICAgICAgIDwhLS0gSGVybyBJbWFnZSAtLT5cbiAgICAgICAgJHtoZXJvSW1hZ2VVcmwgPyBgXG4gICAgICAgICAgPGRpdiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDI0cHg7XCI+XG4gICAgICAgICAgICA8aW1nIHNyYz1cIiR7aGVyb0ltYWdlVXJsfVwiIGFsdD1cIiR7YXJ0aWNsZS50aXRsZX1cIiBzdHlsZT1cIndpZHRoOiAxMDAlOyBoZWlnaHQ6IGF1dG87IGJvcmRlci1yYWRpdXM6IDhweDsgZGlzcGxheTogYmxvY2s7XCIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYCA6IFwiXCJ9XG4gICAgICAgIFxuICAgICAgICA8IS0tIFRpdGxlIC0tPlxuICAgICAgICA8aDEgc3R5bGU9XCJmb250LXNpemU6IDI4cHg7IGZvbnQtd2VpZ2h0OiA3MDA7IGxpbmUtaGVpZ2h0OiAxLjI1OyBtYXJnaW4tYm90dG9tOiAxNnB4OyBjb2xvcjogIzExMTtcIj5cbiAgICAgICAgICAke2FydGljbGUudGl0bGV9XG4gICAgICAgIDwvaDE+XG5cbiAgICAgICAgPCEtLSBDb250ZW50IEJvZHkgKENvbnZlcnRlZCBmcm9tIFBvcnRhYmxlIFRleHQpIC0tPlxuICAgICAgICA8ZGl2IHN0eWxlPVwiZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS42OyBjb2xvcjogIzQ0NDsgbWFyZ2luLWJvdHRvbTogMzJweDtcIj5cbiAgICAgICAgICAke2JvZHlIdG1sIHx8IGA8cD4ke2FydGljbGUuZXhjZXJwdH08L3A+YH0gXG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDwhLS0gUmVhZCBNb3JlIEJ1dHRvbiAoSWYgbmVlZGVkLCBwcmltYXJpbHkgZm9yIGV4Y2VycHQtb25seSBlbWFpbHMsIGJ1dCBnb29kIENUQSBhbnl3YXkpIC0tPlxuICAgICAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjogY2VudGVyOyBtYXJnaW4tdG9wOiA0MHB4OyBwYWRkaW5nLXRvcDogMjBweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNlZWU7XCI+XG4gICAgICAgICAgPGEgaHJlZj1cIiR7YXJ0aWNsZVVybH1cIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICMwMDA7IGNvbG9yOiAjZmZmOyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IHBhZGRpbmc6IDE0cHggMjhweDsgYm9yZGVyLXJhZGl1czogNnB4OyBmb250LXdlaWdodDogNjAwOyBmb250LXNpemU6IDE2cHg7IGRpc3BsYXk6IGlubGluZS1ibG9jaztcIj5cbiAgICAgICAgICAgIFJlYWQgVGhpcyBBcnRpY2xlIG9uIHRoZSBXZWJzaXRlXG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi10b3A6IDI0cHg7IGZvbnQtc2l6ZTogMTRweDsgY29sb3I6ICM4ODg7XCI+XG4gICAgICAgICAgPHA+UHVibGlzaGVkIG9uICR7bmV3IERhdGUoYXJ0aWNsZS5wdWJsaXNoZWRBdCB8fCBEYXRlLm5vdygpKS50b0xvY2FsZURhdGVTdHJpbmcoKX08L3A+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICA8L2Rpdj5cbiAgICBgO1xuXG4gICAgLy8gNS4gQ3JlYXRlIERyYWZ0IEJyb2FkY2FzdCBpbiBLaXRcbiAgICBjb25zdCBicm9hZGNhc3QgPSBhd2FpdCBjcmVhdGVCcm9hZGNhc3Qoe1xuICAgICAgc3ViamVjdDogYE5ldyBQb3N0OiAke2FydGljbGUudGl0bGV9YCxcbiAgICAgIGNvbnRlbnQ6IGVtYWlsVGVtcGxhdGUsXG4gICAgICBwdWJsaWM6IGZhbHNlLCAvLyBEcmFmdFxuICAgICAgZGVzY3JpcHRpb246IGBEcmFmdGVkIHZpYSBTYW5pdHkgQ29ubmVjdCBvbiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX1gXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhgRHJhZnQgY3JlYXRlZCBmb3IgJHthcnRpY2xlLnRpdGxlfSAoS2l0IElEOiAke2Jyb2FkY2FzdC5kYXRhPy5pZH0pYCk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IHRydWUsIFxuICAgICAgYnJvYWRjYXN0SWQ6IGJyb2FkY2FzdC5kYXRhPy5pZCxcbiAgICAgIG1lc3NhZ2U6IFwiRHJhZnQgY3JlYXRlZCBzdWNjZXNzZnVsbHkgd2l0aCBmdWxsIGNvbnRlbnRcIiBcbiAgICB9LCB7XG4gICAgICBoZWFkZXJzOiBjb3JzSGVhZGVyc1xuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRHJhZnQgZ2VuZXJhdGlvbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIC8vIEVuc3VyZSB3ZSByZXR1cm4gSlNPTiB3aXRoIENPUlMgc3BlY2lmaWMgaGVhZGVycyBldmVuIG9uIGNyYXNoXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBcbiAgICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yXCIsIFxuICAgICAgICBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIFxuICAgICAgfSwgXG4gICAgICB7IFxuICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgaGVhZGVyczogY29yc0hlYWRlcnNcbiAgICAgIH1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBPUFRJT05TKCkge1xuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe30sIHtcbiAgICBoZWFkZXJzOiBjb3JzSGVhZGVyc1xuICB9KTtcbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVCcm9hZGNhc3QiLCJjbGllbnQiLCJ1cmxGb3JJbWFnZSIsInRvSFRNTCIsIlNBTklUWV9XRUJIT09LX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJjb3JzSGVhZGVycyIsInBvcnRhYmxlVGV4dENvbXBvbmVudHMiLCJibG9jayIsImgxIiwiY2hpbGRyZW4iLCJoMiIsImgzIiwibm9ybWFsIiwiYmxvY2txdW90ZSIsImxpc3QiLCJidWxsZXQiLCJudW1iZXIiLCJsaXN0SXRlbSIsIm1hcmtzIiwibGluayIsInZhbHVlIiwiaHJlZiIsInN0cm9uZyIsImVtIiwidHlwZXMiLCJpbWFnZSIsImltYWdlVXJsIiwiYXNzZXQiLCJ3aWR0aCIsInVybCIsImFsdCIsIlBPU1QiLCJyZXF1ZXN0Iiwic2VjcmV0IiwiaGVhZGVycyIsImdldCIsInNhbml0eUNoZWNrIiwiY29uc29sZSIsIndhcm4iLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJib2R5IiwiZG9jSWQiLCJfaWQiLCJxdWVyeSIsImFydGljbGUiLCJmZXRjaCIsImlkIiwiYXJ0aWNsZVVybCIsInNsdWciLCJjdXJyZW50IiwicmF3SW1hZ2UiLCJtYWluSW1hZ2UiLCJjb3ZlckltYWdlIiwiaGVyb0ltYWdlVXJsIiwiYm9keUh0bWwiLCJjb21wb25lbnRzIiwiZW1haWxUZW1wbGF0ZSIsInRpdGxlIiwiZXhjZXJwdCIsIkRhdGUiLCJwdWJsaXNoZWRBdCIsIm5vdyIsInRvTG9jYWxlRGF0ZVN0cmluZyIsImJyb2FkY2FzdCIsInN1YmplY3QiLCJjb250ZW50IiwicHVibGljIiwiZGVzY3JpcHRpb24iLCJ0b0xvY2FsZVN0cmluZyIsImxvZyIsImRhdGEiLCJzdWNjZXNzIiwiYnJvYWRjYXN0SWQiLCJtZXNzYWdlIiwiZGV0YWlscyIsIk9QVElPTlMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/admin/newsletter/draft/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/kit/client.ts":
/*!*******************************!*\
  !*** ./src/lib/kit/client.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addSubscriberToForm: () => (/* binding */ addSubscriberToForm),\n/* harmony export */   createBroadcast: () => (/* binding */ createBroadcast),\n/* harmony export */   createSubscriber: () => (/* binding */ createSubscriber),\n/* harmony export */   getSubscriberByEmail: () => (/* binding */ getSubscriberByEmail),\n/* harmony export */   listTags: () => (/* binding */ listTags),\n/* harmony export */   tagSubscriber: () => (/* binding */ tagSubscriber)\n/* harmony export */ });\n/**\n * Kit.com (ConvertKit) V4 API Client\n * Base URL: https://api.kit.com/v4/\n * Auth: X-Kit-Api-Key header\n */ const KIT_API_BASE = \"https://api.kit.com/v4\";\nasync function kitFetch(endpoint, options = {}) {\n    const apiKey = process.env.KIT_API_KEY;\n    if (!apiKey) {\n        throw new Error(\"KIT_API_KEY environment variable is not set\");\n    }\n    const response = await fetch(`${KIT_API_BASE}${endpoint}`, {\n        ...options,\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-Kit-Api-Key\": apiKey,\n            ...options.headers\n        }\n    });\n    if (!response.ok) {\n        const errorData = await response.json().catch(()=>({}));\n        throw new Error(`Kit API error: ${response.status} - ${JSON.stringify(errorData)}`);\n    }\n    return response.json();\n}\n/**\n * Create or update a subscriber (upsert behavior)\n * If email exists, updates first_name; otherwise creates new subscriber\n */ async function createSubscriber(params) {\n    const { email, ...rest } = params;\n    return kitFetch(\"/subscribers\", {\n        method: \"POST\",\n        body: JSON.stringify({\n            email_address: email,\n            ...rest\n        })\n    });\n}\n/**\n * Get a subscriber by email\n */ async function getSubscriberByEmail(email) {\n    const encodedEmail = encodeURIComponent(email);\n    return kitFetch(`/subscribers?email_address=${encodedEmail}`);\n}\n/**\n * Tag a subscriber\n */ async function tagSubscriber(subscriberId, tagId) {\n    return kitFetch(`/tags/${tagId}/subscribers/${subscriberId}`, {\n        method: \"POST\"\n    });\n}\n/**\n * Add subscriber to a form\n */ async function addSubscriberToForm(subscriberId, formId) {\n    return kitFetch(`/forms/${formId}/subscribers/${subscriberId}`, {\n        method: \"POST\"\n    });\n}\n/**\n * List all tags\n */ async function listTags() {\n    return kitFetch(\"/tags\");\n}\n/**\n * Create a draft broadcast\n * Note: V4 API might use /broadcasts\n */ async function createBroadcast(params) {\n    return kitFetch(\"/broadcasts\", {\n        method: \"POST\",\n        body: JSON.stringify(params)\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2tpdC9jbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7Ozs7Q0FJQyxHQUVELE1BQU1BLGVBQWU7QUFzQnJCLGVBQWVDLFNBQ2JDLFFBQWdCLEVBQ2hCQyxVQUF1QixDQUFDLENBQUM7SUFFekIsTUFBTUMsU0FBU0MsUUFBUUMsR0FBRyxDQUFDQyxXQUFXO0lBRXRDLElBQUksQ0FBQ0gsUUFBUTtRQUNYLE1BQU0sSUFBSUksTUFBTTtJQUNsQjtJQUVBLE1BQU1DLFdBQVcsTUFBTUMsTUFBTSxDQUFDLEVBQUVWLGFBQWEsRUFBRUUsU0FBUyxDQUFDLEVBQUU7UUFDekQsR0FBR0MsT0FBTztRQUNWUSxTQUFTO1lBQ1AsZ0JBQWdCO1lBQ2hCLGlCQUFpQlA7WUFDakIsR0FBR0QsUUFBUVEsT0FBTztRQUNwQjtJQUNGO0lBRUEsSUFBSSxDQUFDRixTQUFTRyxFQUFFLEVBQUU7UUFDaEIsTUFBTUMsWUFBWSxNQUFNSixTQUFTSyxJQUFJLEdBQUdDLEtBQUssQ0FBQyxJQUFPLEVBQUM7UUFDdEQsTUFBTSxJQUFJUCxNQUNSLENBQUMsZUFBZSxFQUFFQyxTQUFTTyxNQUFNLENBQUMsR0FBRyxFQUFFQyxLQUFLQyxTQUFTLENBQUNMLFdBQVcsQ0FBQztJQUV0RTtJQUVBLE9BQU9KLFNBQVNLLElBQUk7QUFDdEI7QUFFQTs7O0NBR0MsR0FDTSxlQUFlSyxpQkFBaUJDLE1BQTJCO0lBQ2hFLE1BQU0sRUFBRUMsS0FBSyxFQUFFLEdBQUdDLE1BQU0sR0FBR0Y7SUFDM0IsT0FBT25CLFNBQXdCLGdCQUFnQjtRQUM3Q3NCLFFBQVE7UUFDUkMsTUFBTVAsS0FBS0MsU0FBUyxDQUFDO1lBQ25CTyxlQUFlSjtZQUNmLEdBQUdDLElBQUk7UUFDVDtJQUNGO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNNLGVBQWVJLHFCQUFxQkwsS0FBYTtJQUN0RCxNQUFNTSxlQUFlQyxtQkFBbUJQO0lBQ3hDLE9BQU9wQixTQUEwQixDQUFDLDJCQUEyQixFQUFFMEIsYUFBYSxDQUFDO0FBQy9FO0FBRUE7O0NBRUMsR0FDTSxlQUFlRSxjQUFjQyxZQUFvQixFQUFFQyxLQUFhO0lBQ3JFLE9BQU85QixTQUFTLENBQUMsTUFBTSxFQUFFOEIsTUFBTSxhQUFhLEVBQUVELGFBQWEsQ0FBQyxFQUFFO1FBQzVEUCxRQUFRO0lBQ1Y7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZVMsb0JBQW9CRixZQUFvQixFQUFFRyxNQUFjO0lBQzVFLE9BQU9oQyxTQUFTLENBQUMsT0FBTyxFQUFFZ0MsT0FBTyxhQUFhLEVBQUVILGFBQWEsQ0FBQyxFQUFFO1FBQzlEUCxRQUFRO0lBQ1Y7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZVc7SUFDcEIsT0FBT2pDLFNBQThDO0FBQ3ZEO0FBY0E7OztDQUdDLEdBQ00sZUFBZWtDLGdCQUFnQmYsTUFBMEI7SUFDOUQsT0FBT25CLFNBQXlELGVBQWU7UUFDN0VzQixRQUFRO1FBQ1JDLE1BQU1QLEtBQUtDLFNBQVMsQ0FBQ0U7SUFDdkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2F2ZWRpYW4tbmV3c3Jvb20vLi9zcmMvbGliL2tpdC9jbGllbnQudHM/MzFiZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEtpdC5jb20gKENvbnZlcnRLaXQpIFY0IEFQSSBDbGllbnRcbiAqIEJhc2UgVVJMOiBodHRwczovL2FwaS5raXQuY29tL3Y0L1xuICogQXV0aDogWC1LaXQtQXBpLUtleSBoZWFkZXJcbiAqL1xuXG5jb25zdCBLSVRfQVBJX0JBU0UgPSAnaHR0cHM6Ly9hcGkua2l0LmNvbS92NCc7XG5cbmludGVyZmFjZSBLaXRTdWJzY3JpYmVyUGFyYW1zIHtcbiAgZW1haWw6IHN0cmluZztcbiAgZmlyc3RfbmFtZT86IHN0cmluZztcbiAgc3RhdGU/OiAnYWN0aXZlJyB8ICdpbmFjdGl2ZSc7XG4gIGZpZWxkcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG59XG5cbmludGVyZmFjZSBLaXRBcGlSZXNwb25zZTxUPiB7XG4gIGRhdGE/OiBUO1xuICBlcnJvcnM/OiBBcnJheTx7IG1lc3NhZ2U6IHN0cmluZyB9Pjtcbn1cblxuaW50ZXJmYWNlIEtpdFN1YnNjcmliZXIge1xuICBpZDogbnVtYmVyO1xuICBlbWFpbF9hZGRyZXNzOiBzdHJpbmc7XG4gIGZpcnN0X25hbWU6IHN0cmluZyB8IG51bGw7XG4gIHN0YXRlOiBzdHJpbmc7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbn1cblxuYXN5bmMgZnVuY3Rpb24ga2l0RmV0Y2g8VD4oXG4gIGVuZHBvaW50OiBzdHJpbmcsXG4gIG9wdGlvbnM6IFJlcXVlc3RJbml0ID0ge31cbik6IFByb21pc2U8S2l0QXBpUmVzcG9uc2U8VD4+IHtcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuS0lUX0FQSV9LRVk7XG4gIFxuICBpZiAoIWFwaUtleSkge1xuICAgIHRocm93IG5ldyBFcnJvcignS0lUX0FQSV9LRVkgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbm90IHNldCcpO1xuICB9XG5cbiAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtLSVRfQVBJX0JBU0V9JHtlbmRwb2ludH1gLCB7XG4gICAgLi4ub3B0aW9ucyxcbiAgICBoZWFkZXJzOiB7XG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1gtS2l0LUFwaS1LZXknOiBhcGlLZXksXG4gICAgICAuLi5vcHRpb25zLmhlYWRlcnMsXG4gICAgfSxcbiAgfSk7XG5cbiAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKS5jYXRjaCgoKSA9PiAoe30pKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgS2l0IEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9IC0gJHtKU09OLnN0cmluZ2lmeShlcnJvckRhdGEpfWBcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgb3IgdXBkYXRlIGEgc3Vic2NyaWJlciAodXBzZXJ0IGJlaGF2aW9yKVxuICogSWYgZW1haWwgZXhpc3RzLCB1cGRhdGVzIGZpcnN0X25hbWU7IG90aGVyd2lzZSBjcmVhdGVzIG5ldyBzdWJzY3JpYmVyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmVyKHBhcmFtczogS2l0U3Vic2NyaWJlclBhcmFtcykge1xuICBjb25zdCB7IGVtYWlsLCAuLi5yZXN0IH0gPSBwYXJhbXM7XG4gIHJldHVybiBraXRGZXRjaDxLaXRTdWJzY3JpYmVyPignL3N1YnNjcmliZXJzJywge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGVtYWlsX2FkZHJlc3M6IGVtYWlsLFxuICAgICAgLi4ucmVzdFxuICAgIH0pLFxuICB9KTtcbn1cblxuLyoqXG4gKiBHZXQgYSBzdWJzY3JpYmVyIGJ5IGVtYWlsXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdWJzY3JpYmVyQnlFbWFpbChlbWFpbDogc3RyaW5nKSB7XG4gIGNvbnN0IGVuY29kZWRFbWFpbCA9IGVuY29kZVVSSUNvbXBvbmVudChlbWFpbCk7XG4gIHJldHVybiBraXRGZXRjaDxLaXRTdWJzY3JpYmVyW10+KGAvc3Vic2NyaWJlcnM/ZW1haWxfYWRkcmVzcz0ke2VuY29kZWRFbWFpbH1gKTtcbn1cblxuLyoqXG4gKiBUYWcgYSBzdWJzY3JpYmVyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0YWdTdWJzY3JpYmVyKHN1YnNjcmliZXJJZDogbnVtYmVyLCB0YWdJZDogbnVtYmVyKSB7XG4gIHJldHVybiBraXRGZXRjaChgL3RhZ3MvJHt0YWdJZH0vc3Vic2NyaWJlcnMvJHtzdWJzY3JpYmVySWR9YCwge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICB9KTtcbn1cblxuLyoqXG4gKiBBZGQgc3Vic2NyaWJlciB0byBhIGZvcm1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFN1YnNjcmliZXJUb0Zvcm0oc3Vic2NyaWJlcklkOiBudW1iZXIsIGZvcm1JZDogbnVtYmVyKSB7XG4gIHJldHVybiBraXRGZXRjaChgL2Zvcm1zLyR7Zm9ybUlkfS9zdWJzY3JpYmVycy8ke3N1YnNjcmliZXJJZH1gLCB7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gIH0pO1xufVxuXG4vKipcbiAqIExpc3QgYWxsIHRhZ3NcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxpc3RUYWdzKCkge1xuICByZXR1cm4ga2l0RmV0Y2g8QXJyYXk8eyBpZDogbnVtYmVyOyBuYW1lOiBzdHJpbmcgfT4+KCcvdGFncycpO1xufVxuXG5pbnRlcmZhY2UgS2l0QnJvYWRjYXN0UGFyYW1zIHtcbiAgc3ViamVjdDogc3RyaW5nO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICBwdWJsaWM/OiBib29sZWFuO1xuICBwdWJsaXNoZWRfYXQ/OiBzdHJpbmc7XG4gIHNlbmRfYXQ/OiBzdHJpbmc7XG4gIHRodW1ibmFpbF9hbHQ/OiBzdHJpbmc7XG4gIHRodW1ibmFpbF91cmw/OiBzdHJpbmc7XG4gIGVtYWlsX2xheW91dF90ZW1wbGF0ZT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBkcmFmdCBicm9hZGNhc3RcbiAqIE5vdGU6IFY0IEFQSSBtaWdodCB1c2UgL2Jyb2FkY2FzdHNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUJyb2FkY2FzdChwYXJhbXM6IEtpdEJyb2FkY2FzdFBhcmFtcykge1xuICByZXR1cm4ga2l0RmV0Y2g8eyBpZDogbnVtYmVyOyBzdWJqZWN0OiBzdHJpbmc7IHN0YXRlOiBzdHJpbmcgfT4oJy9icm9hZGNhc3RzJywge1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHBhcmFtcyksXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbIktJVF9BUElfQkFTRSIsImtpdEZldGNoIiwiZW5kcG9pbnQiLCJvcHRpb25zIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIktJVF9BUElfS0VZIiwiRXJyb3IiLCJyZXNwb25zZSIsImZldGNoIiwiaGVhZGVycyIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImNhdGNoIiwic3RhdHVzIiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWF0ZVN1YnNjcmliZXIiLCJwYXJhbXMiLCJlbWFpbCIsInJlc3QiLCJtZXRob2QiLCJib2R5IiwiZW1haWxfYWRkcmVzcyIsImdldFN1YnNjcmliZXJCeUVtYWlsIiwiZW5jb2RlZEVtYWlsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwidGFnU3Vic2NyaWJlciIsInN1YnNjcmliZXJJZCIsInRhZ0lkIiwiYWRkU3Vic2NyaWJlclRvRm9ybSIsImZvcm1JZCIsImxpc3RUYWdzIiwiY3JlYXRlQnJvYWRjYXN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/kit/client.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/sanity/client.ts":
/*!**********************************!*\
  !*** ./src/lib/sanity/client.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   client: () => (/* binding */ client),\n/* harmony export */   serverClient: () => (/* binding */ serverClient),\n/* harmony export */   urlForImage: () => (/* binding */ urlForImage)\n/* harmony export */ });\n/* harmony import */ var _sanity_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sanity/client */ \"(rsc)/./node_modules/@sanity/client/dist/index.browser.js\");\n/* harmony import */ var _sanity_image_url__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sanity/image-url */ \"(rsc)/./node_modules/@sanity/image-url/lib/node/index.js\");\n/* harmony import */ var _sanity_image_url__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_sanity_image_url__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst client = (0,_sanity_client__WEBPACK_IMPORTED_MODULE_0__.createClient)({\n    projectId: \"umgd4ynt\",\n    dataset: \"production\" || 0,\n    apiVersion: \"2024-01-01\",\n    useCdn: \"development\" === \"production\"\n});\n// Server-side client with write access\nconst serverClient = (0,_sanity_client__WEBPACK_IMPORTED_MODULE_0__.createClient)({\n    projectId: \"umgd4ynt\",\n    dataset: \"production\" || 0,\n    apiVersion: \"2024-01-01\",\n    useCdn: false,\n    token: process.env.SANITY_API_TOKEN\n});\nconst builder = _sanity_image_url__WEBPACK_IMPORTED_MODULE_1___default()(client);\nfunction urlForImage(source) {\n    return builder.image(source);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3Nhbml0eS9jbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQThDO0FBQ0U7QUFHekMsTUFBTUUsU0FBU0YsNERBQVlBLENBQUM7SUFDakNHLFdBQVdDLFVBQXlDO0lBQ3BERyxTQUFTSCxZQUFzQyxJQUFJO0lBQ25ESyxZQUFZO0lBQ1pDLFFBQVFOLGtCQUF5QjtBQUNuQyxHQUFHO0FBRUgsdUNBQXVDO0FBQ2hDLE1BQU1PLGVBQWVYLDREQUFZQSxDQUFDO0lBQ3ZDRyxXQUFXQyxVQUF5QztJQUNwREcsU0FBU0gsWUFBc0MsSUFBSTtJQUNuREssWUFBWTtJQUNaQyxRQUFRO0lBQ1JFLE9BQU9SLFFBQVFDLEdBQUcsQ0FBQ1EsZ0JBQWdCO0FBQ3JDLEdBQUc7QUFFSCxNQUFNQyxVQUFVYix3REFBZUEsQ0FBQ0M7QUFFekIsU0FBU2EsWUFBWUMsTUFBeUI7SUFDbkQsT0FBT0YsUUFBUUcsS0FBSyxDQUFDRDtBQUN2QiIsInNvdXJjZXMiOlsid2VicGFjazovL2F2ZWRpYW4tbmV3c3Jvb20vLi9zcmMvbGliL3Nhbml0eS9jbGllbnQudHM/OTZhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc2FuaXR5L2NsaWVudCc7XG5pbXBvcnQgaW1hZ2VVcmxCdWlsZGVyIGZyb20gJ0BzYW5pdHkvaW1hZ2UtdXJsJztcbmltcG9ydCB0eXBlIHsgU2FuaXR5SW1hZ2VTb3VyY2UgfSBmcm9tICdAc2FuaXR5L2ltYWdlLXVybC9saWIvdHlwZXMvdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgY2xpZW50ID0gY3JlYXRlQ2xpZW50KHtcbiAgcHJvamVjdElkOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TQU5JVFlfUFJPSkVDVF9JRCxcbiAgZGF0YXNldDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU0FOSVRZX0RBVEFTRVQgfHwgJ3Byb2R1Y3Rpb24nLFxuICBhcGlWZXJzaW9uOiAnMjAyNC0wMS0wMScsXG4gIHVzZUNkbjogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbn0pO1xuXG4vLyBTZXJ2ZXItc2lkZSBjbGllbnQgd2l0aCB3cml0ZSBhY2Nlc3NcbmV4cG9ydCBjb25zdCBzZXJ2ZXJDbGllbnQgPSBjcmVhdGVDbGllbnQoe1xuICBwcm9qZWN0SWQ6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NBTklUWV9QUk9KRUNUX0lELFxuICBkYXRhc2V0OiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TQU5JVFlfREFUQVNFVCB8fCAncHJvZHVjdGlvbicsXG4gIGFwaVZlcnNpb246ICcyMDI0LTAxLTAxJyxcbiAgdXNlQ2RuOiBmYWxzZSxcbiAgdG9rZW46IHByb2Nlc3MuZW52LlNBTklUWV9BUElfVE9LRU4sXG59KTtcblxuY29uc3QgYnVpbGRlciA9IGltYWdlVXJsQnVpbGRlcihjbGllbnQpO1xuXG5leHBvcnQgZnVuY3Rpb24gdXJsRm9ySW1hZ2Uoc291cmNlOiBTYW5pdHlJbWFnZVNvdXJjZSkge1xuICByZXR1cm4gYnVpbGRlci5pbWFnZShzb3VyY2UpO1xufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImltYWdlVXJsQnVpbGRlciIsImNsaWVudCIsInByb2plY3RJZCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TQU5JVFlfUFJPSkVDVF9JRCIsImRhdGFzZXQiLCJORVhUX1BVQkxJQ19TQU5JVFlfREFUQVNFVCIsImFwaVZlcnNpb24iLCJ1c2VDZG4iLCJzZXJ2ZXJDbGllbnQiLCJ0b2tlbiIsIlNBTklUWV9BUElfVE9LRU4iLCJidWlsZGVyIiwidXJsRm9ySW1hZ2UiLCJzb3VyY2UiLCJpbWFnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/sanity/client.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@sanity","vendor-chunks/rxjs","vendor-chunks/next","vendor-chunks/get-it","vendor-chunks/@portabletext","vendor-chunks/tslib"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute&page=%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fadmin%2Fnewsletter%2Fdraft%2Froute.ts&appDir=%2FUsers%2Fjohan%2F.gemini%2Fantigravity%2Fscratch%2Favedian-newsroom-nextjs%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fjohan%2F.gemini%2Fantigravity%2Fscratch%2Favedian-newsroom-nextjs&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();